%% @author  dzlaozhu35@outlook.com
%% @doc       固定地图逻辑模块

-module(fixed_map).

%% ====================================================================
%% API functions
%% ====================================================================
-export([on_init/2, on_trigger/4, on_loop/3, on_stop/3]).

-export([allocate_map/4, init_redirect/1]).

-include("common.hrl").

-record(state, {}).

%% 
%% 玩家进程 callback functions
%%

%% =================================================================================
%% 功能: 玩家请求分配地图
%% 描述: 动态地图在此处开启进程 或 返回动态地图的ID
%% =================================================================================
allocate_map(_PlayerStatus, EnterMapDocID, PosX, PosY) ->
	{EnterMapDocID * ?TEN_MILLION, PosX, PosY}.

%% =================================================================================
%% 功能: 玩家上线初始化时调用, 用于地图重定向
%% 描述: 动态地图下线的玩家, 地图已经关闭, 则重定向到固定地图
%% =================================================================================
init_redirect(PlayerStatus) ->
	PlayerStatus.

%%
%% 地图内部逻辑 callback functions
%%

%% =================================================================================
%% 功能: 地图初始化
%% =================================================================================
on_init(_MapID, _MapDocID) ->
	{ok, #state{}}.

%% =================================================================================
%% 功能: 地图消息处理
%% =================================================================================
on_trigger(_Msg, _MapID, _MapDocID, _MapState) ->
	ok.

%% =================================================================================
%% 功能: 地图循环
%% =================================================================================
on_loop(_MapID, _MapDocID, _MapState) ->
	ok.

%% =================================================================================
%% 功能: 地图关闭
%% =================================================================================
on_stop(_MapID, _MapDocID, _MapState) ->
	ok.




